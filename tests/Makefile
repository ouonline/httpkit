# This Makefile is generated by omake: https://github.com/ouonline/omake.git

CC := gcc

ifeq ($(debug), y)
	CFLAGS += -g
else
	CFLAGS += -O2 -DNDEBUG
endif

TARGET := test_httpkit

.PHONY: all clean

all: $(TARGET)

.PHONY: omake_phony_0

omake_phony_0:
	$(MAKE) debug=$(debug) libhttpkit_static.a -C ..

test_httpkit_INCLUDE := -I../..

test.c.test_httpkit.o: test.c
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC $(test_httpkit_INCLUDE) -c $< -o $@

test_httpkit_OBJS := test.c.test_httpkit.o

test_httpkit_LIBS := ../libhttpkit_static.a ../../utils/libutils_static.a

test_httpkit: $(test_httpkit_OBJS) | omake_phony_0
	$(CC) $(CFLAGS) -Wall -Werror -Wextra -fPIC -o $@ $^ $(test_httpkit_LIBS)

clean:
	rm -f $(TARGET) $(test_httpkit_OBJS)
